
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>VITAC – Merluza de Cola</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>
    :root { --cols: 7; --rows: 30; }
    * { box-sizing: border-box; }
    body, html { margin: 0; height: 100%; font-family: Arial, sans-serif; }
    #grid { display: grid; grid-template-columns: repeat(7, 1fr);
            grid-template-rows: repeat(30, 1fr); height: 100vh;
            gap: 4px; padding: 4px; background: #fafafa; overflow: hidden; }
    .cell { border: 1px solid #e0e0e0; border-radius: 4px; min-width: 0; }
    canvas { display:block; width:100% !important; height:100% !important; min-width:0; }

    #logo { grid-column: 1 / 2; grid-row: 1 / 5; background: #004f9e;
            display:flex; align-items:center; justify-content:center; overflow:hidden; }
    #logo img { max-width:100%; max-height:100%; object-fit:contain; }

    #selector { grid-column: 1 / 2; grid-row: 5 / 31; background:#f1f1f1;
                padding:6px; overflow-y:auto; display:grid; grid-template-columns:1fr; gap:6px; }
    #selector button { width:100%; height:32px; padding:6px 4px; border:1px solid #ccc; background:#fff;
                       cursor:pointer; border-radius:6px; transition:background .15s; font-size:13px; }
    #selector button:hover { background:#e8e8ff; }
    #selector button.active { background:#004f9e; color:#fff; }

    #chartMcolaCont { grid-column: 2 / 4; grid-row: 1 / 14; padding: 8px; display:flex; }
    #infoPanel { grid-column: 2 / 4; grid-row: 14 / 16; padding: 4px 6px; display:flex; gap:6px; align-items:center; }
    #chartMsurCont { grid-column: 2 / 4; grid-row: 16 / 29; padding: 8px; display:flex; }
    #infoPanelMsur { grid-column: 2 / 4; grid-row: 29 / 31; padding: 4px 6px; display:flex; gap:6px; align-items:center; }
    .infoBox { display:flex; align-items:baseline; gap:4px; background:#f9f9f9; border:1px solid #ddd; border-radius:3px; padding:2px 4px; white-space:nowrap; }
    .infoBox .label { font-weight:700; } .infoBox .value { font-weight:600; }

    #donutCaptCont { grid-column: 4 / 6; grid-row: 1 / 23; padding: 8px; display:flex; }
    #panelLance { grid-column: 4 / 6; grid-row: 23 / 31; padding: 8px; display:flex; flex-direction:column; gap:6px; }
    .legend { display:flex; justify-content:center; gap:12px; font-weight:600; }
    .legend .sq{ width:10px; height:10px; display:inline-block; margin-right:4px; }
    .sq.mcola{ background:#f28e2b; } .sq.msur{ background:#4e79a7; } .sq.otros{ background:#76b7b2; }
    .kgs { display:flex; justify-content:center; gap:24px; }
    .kgBox { border:1px solid #000; padding:6px 16px; font-weight:700; }
    .meta { border-collapse:collapse; width:100%; }
    .meta th, .meta td { border:1px solid #000; padding:4px; text-align:center; }
    .meta th { background:#f0f0f0; }

    #chartMcola, #chartMsur, #donutCapt { width:100%; height:100%; }
    #mapLance { grid-column: 6 / 8; grid-row: 1 / 31; width:100%; height:100%; }
  </style>
</head>
<body>
  <div id="grid">
    <div id="logo" class="cell"><img id="logo-img" alt="Logo VITAC"></div>
    <div id="selector" class="cell"></div>

    <div id="chartMcolaCont" class="cell"><canvas id="chartMcola"></canvas></div>
    <div id="infoPanel" class="cell">
      <div class="infoBox"><span class="label">MODA</span><span id="valModa" class="value">–</span></div>
      <div class="infoBox"><span class="label">FREC</span><span id="valFrec" class="value">–</span></div>
      <div class="infoBox"><span class="label">RANGO</span><span id="valRango" class="value">–</span></div>
      <div class="infoBox"><span class="label">TOTAL</span><span id="valTotal" class="value">–</span></div>
    </div>
    <div id="chartMsurCont" class="cell"><canvas id="chartMsur"></canvas></div>
    <div id="infoPanelMsur" class="cell">
      <div class="infoBox"><span class="label">MODA</span><span id="valModaS" class="value">–</span></div>
      <div class="infoBox"><span class="label">FREC</span><span id="valFrecS" class="value">–</span></div>
      <div class="infoBox"><span class="label">RANGO</span><span id="valRangoS" class="value">–</span></div>
      <div class="infoBox"><span class="label">TOTAL</span><span id="valTotalS" class="value">–</span></div>
    </div>

    <div id="donutCaptCont" class="cell"><canvas id="donutCapt"></canvas></div>
    <div id="panelLance" class="cell">
      <div class="legend">
        <span><span class="sq mcola"></span> Merluza cola</span>
        <span><span class="sq msur"></span> Merluza sur</span>
        <span><span class="sq otros"></span> Otros</span>
      </div>
      <div class="kgs">
        <div class="kgBox"><span id="kgMcola">–</span> kg</div>
        <div class="kgBox"><span id="kgMsur">–</span> kg</div>
        <div class="kgBox"><span id="kgOtros">–</span> kg</div>
      </div>
      <table class="meta">
        <thead><tr><th>FECHA</th><th>LATITUD</th><th>LONGITUD</th></tr></thead>
        <tbody><tr><td id="metaFecha"></td><td id="metaLat"></td><td id="metaLon"></td></tr></tbody>
      </table>
    </div>

    <div id="mapLance" class="cell"></div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="app_vitac.js"></script>
</body>
</html>
